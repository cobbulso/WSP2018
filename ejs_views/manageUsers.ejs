<!DOCTYPE html>
<style>
	ul {
		list-style-type: none;
		margin: 0;
		padding: 0;
		overflow: hidden;
		background-color: #333;
	}
	li {
		float: left;
	}
	li a {
		display: block;
		color: white;
		text-align: center;
		padding: 14px 16px;
		text-decoration: none;
	}

	li a:hover:not(.active) {
	background-color: #111;
}
</style>
<html lang="en">
	<head>
		<!-- Required meta tags -->
        <meta charset="utf-8"
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

		<!-- Bootstrap CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

		<title>Users Information</title>
	</head>
    <body>
		<nav class="nav">
			<ul style="width: 100%">
				<li class="active">
					<a href="/">Home</a>
				</li>
				<% if (req.isAuthenticated()) { %>
					<% if (user.role === "admin") { %>
						<li>
							<a href="/manageUsers">Manage User</a>
						</li>
						<li style="float:right">
							<a href="/checkout">Cart</a>
						</li>
						<li style="float:right">
							<a href="/logout">Logout</a>
						</li>
						
					<% } else { %>
						<li>
							<a href="/mypage">My Page</a>
						</li>
						<li style="float:right">
							<a href="/checkout">Cart</a>
						</li>	
						<li style="float:right">
							<a href="/logout">Logout</a>
						</li>
							
					<% } %>			
				<% } else { %>
					<li style="float:right">
						<a href="/checkout">Cart</a>
					</li>
					<li style="float:right">
						<a href="/signup">Signup</a>
					</li>
					<li style="float:right">
						<a href="/login">Login</a>
					</li>
				<% } %>
			</ul>
		</nav>
        <div class="container">
			<div class="jumbotron">
				<div class="container">
					<h2 class="display-5">User Information</h2>

					<table class="table table-hover table-dark">
						<thead>
							<tr>
							<th scope="col">First Name</th>
							<th scope="col">Last Name</th>
							<th scope="col">Email Address</th>
							<th scope="col">Address</th>
							<th scope="col">Favorite Food</th>
							<th scope="col">Role</th>
							<th scope="col">Edit</th>
							<th scope="col">Unregister</th>							
							</tr>
						</thead>
						<tbody>
						<% for (const user of results) { %>
							<tr>
								<td><%= user.firstName %></td>
								<td><%= user.lastName %></td>
								<td><%= user.email %></td>
								<td><%= user.streetAddress %> <%= user.city %> <%= user.state %> <%= user.zipCode %></td>
								<td><%= user.favoriteFood %></td>
								<td><%= user.role %></td>                                                       
								<td>
									<form action="/editUserInfo" method="get"> 
										<input type='hidden' name='userInfo' value='<%= JSON.stringify(user) %>'>
										<button type="submit" class="btn btn-primary">Edit</button><br><br>
									</form>
								</td>
								<td>
									<form action="/unregisterUser" method="get">
										<input type="hidden" name="_id" value="<%= user._id %>">
										<button type="submit" class="btn btn-primary">Unregister</button>
									</form>
								</td>
							</tr>
						<% } %>
						</tbody>
					</table>
				</div>
			</div>
        </div>
		<!-- Optional JavaScript -->
		<!-- jQuery first, then Popper.js, then Bootstrap JS -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    </body>
</html>